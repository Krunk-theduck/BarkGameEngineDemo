{
    "rules": {
        "context_initialization": {
            "description": "Starting point for each interaction",
            "steps": [
            ]
        },
        "operational_protocol": {
            "description": "How to approach tasks",
            "before_action": [
                "Create a MECE task breakdown"
            ],
            "code_changes": [
                "Read relevant code sections before editing",
                "Preserve existing functionality",
                "Maintain type safety",
                "Consider canvas performance impact"
            ]
        },
        "safety_requirements": [
            "NEVER break type safety",
            "ALWAYS maintain proper error handling",
            "ALWAYS document new code",
            "ENSURE consistent frame rate",
            "VALIDATE canvas operations",
            "CHECK memory usage with multiple canvases"
        ],
        "priorities": [
            {
                "source": "engine/",
                "weight": 0.9
            },
            {
                "source": "scripts/",
                "weight": 0.8
            }
        ],
        "modes": {
            "base": {
                "description": "For routine engine updates and quick fixes",
                "features": {
                    "responseStyle": "concise",
                    "codeFormat": "minimal",
                    "examples": false,
                    "suggestions": false
                },
                "bestFor": [
                    "Script tweaks",
                    "Simple entity adjustments",
                    "Basic bug fixes",
                    "Content updates"
                ]
            },
            "engine": {
                "description": "For core engine mechanics",
                "features": {
                    "responseStyle": "technical",
                    "codeFormat": "comprehensive",
                    "examples": true,
                    "suggestions": true,
                    "performanceMetrics": true
                },
                "bestFor": [
                    "Update loop mechanics",
                    "Entity management",
                    "Scene management",
                    "Performance optimization"
                ]
            },
            "canvas": {
                "description": "For camera and rendering features",
                "features": {
                    "responseStyle": "detailed",
                    "codeFormat": "diagnostic",
                    "examples": true,
                    "suggestions": true,
                    "canvasAnalysis": true
                },
                "bestFor": [
                    "Camera viewport management",
                    "Multi-canvas setup",
                    "Rendering optimization",
                    "Canvas scaling"
                ]
            },
            "gameplay": {
                "description": "For game mechanics and player features",
                "features": {
                    "responseStyle": "creative",
                    "codeFormat": "prototype",
                    "examples": true,
                    "suggestions": true,
                    "behaviorConsistency": true
                },
                "bestFor": [
                    "Player controller implementation",
                    "Input management",
                    "Collision systems",
                    "Game state management"
                ]
            }
        },
        "defaultMode": "base",
        "switchingRules": {
            "allowDynamicSwitch": true,
            "persistencePerSession": true
        },
        "project_directives": {
            "name": "bark_engine",
            "ai_first": true,
            "theme": {
                "primary": "white",
                "accent": "blue",
                "style": "minimal"
            }
        }
    }
}